---
layout: post
title: Chapter 2-1. 네트워킹 (Networking)
categories: web3
tags: [Blockchain]
---
블록체인에서의 네트워킹은 P2P 프로토콜을 전제로 한다.

## 1. P2P 패러다임의 이해

- P2P의 역사와 발전 과정
- 중앙화 vs 탈중앙화 vs 분산 시스템
- 주요 P2P 모델: 비구조적(Unstructured) vs 구조적(Structured)

### P2P의 역사와 발전 과정

초기 인터넷 환경은 참여자들이 '피어' (Peer)로서 동등했다. 인터넷이 부흥하며 대부분의 사용자들은 정보를 받는 클라이언트 역할만 하게 됐고 동적 IP 할당, 방화벽 등의 문제로 개인이 서버를 직접 운영하는게 쉽지 않아서 중앙화 시스템 형태가 유지되어 왔다.

냅스터는 하이브리드 방식으로 파일 목록을 제공하기 위해 중앙 서버를 사용하였으나 파일은 사용자들끼리 직접 주고받는 방식으로 운영되었다.

그누텔라는 탈중앙화 방식으로 연결되었는데 이런 구조로 인하여 예측이 어렵고 불안정한 면이 있어 오래 유지되지는 못 했다.

### 중앙화 vs 탈중앙화 vs 분산 시스템

| 특징/항목     | 중앙화 시스템 (Centralized Systems)                          | 탈중앙화 시스템 (Decentralized Systems) / P2P 패러다임                                                          | 분산 시스템 (Distributed Systems)                    |
| ------------- | ------------------------------------------------------------ | --------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------- |
| 정의          | 단일 서버/기관이 모든 제어/데이터 저장                       | 모든 노드가 동등하게 참여, 중앙 중개자 없이 직접 통신                                                           | 독립적 컴퓨팅 요소들의 집합이 단일 시스템처럼 협력   |
| 제어 방식     | 단일 제어 지점                                               | 분산된 제어, 통제 저항성 높음                                                                                   | 여러 노드가 협력하여 분산 제어                       |
| 데이터 저장   | 중앙 서버에 집중                                             | 사용자 PC에 분산 (Content at the Edges)                                                                         | 여러 노드에 분산                                     |
| 관계 모델     | 클라이언트-서버 모델                                         | 동등한 피어(클라이언트 & 서버 역할 동시 수행)                                                                   | 자율 컴퓨팅 요소, 단일 일관성 시스템으로 인지        |
| 자원 활용     | 사용자 PC 유휴 자원 미활용                                   | 유휴 자원 활용 극대화 (Dark Matter of the Internet)                                                             | 자원 공유 지원                                       |
| 안정성        | 단일 실패 지점                                               | 높은 가용성 및 견고성, 단일 실패 지점 없음                                                                      | 일부 노드 실패 시 시스템 유지                        |
| 확장성        | 서버 성능 증강 방식                                          | 이론적으로 노드 증가 시 시스템 용량/성능 증가                                                                   | 증가하는 부하에 효율적으로 대처, 성능 저하 없이 확장 |
| 검열/통제     | 용이                                                         | 매우 어려움 (통제 저항성 높음)                                                                                  | 설계 목표에 따라 다름                                |
| 익명성        | 낮음                                                         | 강화될 수 있음 (믹스 네트워크, 어니언 라우팅 등)                                                                | 설계 목표에 따라 다름                                |
| 주요 목표     | 쉬운 관리, 예측 가능한 성능                                  | 검열 저항성, 높은 가용성, 자원 활용 극대화                                                                      | 자원 공유, 분산 투명성, 개방성, 확장성               |
| 일관성/동기화 | 쉬움                                                         | 복잡성 매우 높음                                                                                                | 복잡성 존재                                          |
| 검색 효율성   | 효율적                                                       | 비효율적일 수 있음 (초기 Gnutella)                                                                              | 설계에 따라 다름                                     |
| 단점          | 단일 실패 지점, 검열/통제 용이, 트래픽 병목, 리소스 비효율성 | 일관성/동기화, 신뢰성/무결성, 검색 효율성, 비대칭 대역폭, 방화벽/NAT, 무임승차, 초기 부트스트랩, 규제/법적 문제 | 구현 복잡성, 관리의 어려움                           |
| 예시          | 전통적 웹사이트, 온라인 게임 서버, 초기 냅스터               | 초기 인터넷(ARPANET), 냅스터(파일 전송), 비트토렌트, 이더리움                                                   | (일반적인 웹 서비스의 백엔드 분산 처리)              |

---

## 2. 컴퓨터 네트워크 기초

- OSI 7계층 및 TCP/IP 모델
- 소켓 프로그래밍의 기본 개념
- 네트워크 프로토콜의 역할과 표준 (IETF RFC)

컴퓨터 네트워크의 기초는 컴퓨터끼리 통신하는 약속의 규칙을 배운다.

**TCP/IP는 네트워크를 통해 정보를 주고받는 '방법'에 대한 기초적인 규칙과 서비스를 제공하는 반면, P2P는 그 '방법' 위에서 '누가 무엇을 어떻게 공유하고 활용할 것인가'에 대한 애플리케이션 차원의 구조와 서비스를 제공한다.**
P2P는 TCP/IP가 제공하는 통신 인프라 없이는 작동할 수 없으나, TCP/IP가 해결하지 않는 탈중앙화된 자원 공유 및 애플리케이션 상호작용의 복잡성을 다룬다.

---

## 3. 주요 P2P 알고리즘과 프로토콜

- DHT(Distributed Hash Table)의 원리
- Kademlia 알고리즘 심층 분석: 노드 탐색, 데이터 저장/검색 방식
- BitTorrent 프로토콜 분석: 트래커, 피어, 처크, 스웜의 개념

참여자들의 인터넷 연결은 네트워크 상황과 속도의 차이에서 대역폭이 부족하다거나 성능을 저하시키는 요소들이 발생되어 기여도 없는 참여자들의 문제를 무임승차(프리라이딩)이라고 불렀다.

이런 문제를 해결하고자 나온 것이 DHT(Distributed Hash Table)라는 기술이다. 이걸 사용하면 중앙 서버가 없어도 참여자들(peer)를 찾아서 파일을 조각내어 효율적으로 공유하는 방식으로 발전했다. 참여자가 전체 정보에 일부만 관리하면서 필요한 정보는 쉽게 찾도록하는 구조다.

1. DHT의 원리
   - DHT는 기존 P2P의 무임승차(프리라이딩) 문제점을 해결하고자 나온 분산 해시 테이블이다.
   - 비트토렌트가 대표적인 예시다.
   - 트래커라고 하는 서버 도움을 받았다.

---

## 4. 여러가지 사용 예시

- BitTorrent
- CometBFT
- go-ethereum

**go-ethereum**은 P2P 네트워크 상에서 유지되는 블록체인의 가상 머신이다.

이더리움은 go-ethereum으로 만들어낸 가상 머신 EVM을 통해서 전 세계 수 많은 노드들을 동등하게 참여해서 거래를 검증하고 네트워크 상태를 함께 유지하는 방식을 만들었다. 거의 모든 종류의 프로그램을 실행할 수 있는 거대한 분산 컴퓨터 환경이다.

지금은 완전한 탈 중앙화를 구현하기 보다는 하이브리드 모델을 사용하거나 참여자의 기여도를 평가하는 시스템을 도입하거나 여러가지 시도들이 있다. 지금의 기술, 사회적 과제들을 고려했을 때 미래의 P2P 시스템은 어떤 모습으로 사용될지 고민해보는 것도 좋은 시도라고 생각한다.

새로운 형태의 분산 시스템이 나타날까 아니면 현실과의 타협으로 하이브리드 형태를 이어갈까? 이에 대한 고민은 다음에 다뤄봐야겠다.
